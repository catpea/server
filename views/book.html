<!doctype html>
<html lang="en">
  <head>
    <%- include('partials/head.html', {}); %>
  </head>
  <body>

  <%- include('partials/nav.html', {}); %>

  <% if(pagination.pageFirst){ %>
    <div class="container mb-5">
      <div class="px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center text-light">
        <h1 class="display-4"><%= pageName %></h1>
        <p class="lead">
          <%= pageDescription %>
        </p>
        <p class="text-muted">
          <%= bookTitle %> Home Page<br>
          <small><% if(currentSort == 'story'){ %> (entries ordered in story mode) <% }else{ %> (showing latest entries first) <% } %></small>
        </p>
      </div>
    </div>
  <% } %>




  <!-- <div class="container">
    <div class="row my-3 mx-1">
      <div class="col-12 my-2 bg-dark rounded shadow text-light fw-light small">
        Reading Book
        <% if(currentSort == 'story'){ %> in Story Mode. <% }else{ %> sorted Latest First. <% } %>
     </div>
    </div>
  </div> -->


  <div class="container">
    <div class="row my-3 mx-1">
      <div class="col-12 col-lg-5 my-2 bg-dark rounded shadow">
        <ul class="nav nav-pills nav-fill">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/book/<%= bookName %>/<%= defaultSort %>"><i class="bi-book text-warning"></i> Book Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/book/<%= bookName %>/toc/<%= defaultSort %>"><i class="bi-card-list"></i> Contents</a>
          </li>
        </ul>
     </div>
     <div class="col-12 col-lg-5  offset-lg-2 my-2 bg-dark rounded shadow">
       <ul class="nav nav-pills nav-fill">
          <% if(currentSort == 'story'){ %>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/book/<%= bookName %>/story"><i class="bi-sort-numeric-down text-warning"></i> Story Mode</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/book/<%= bookName %>/latest"><i class="bi-sort-numeric-down-alt"></i> Latest First</a>
          </li>
          <% }else{ %>
          <li class="nav-item">
            <a class="nav-link" href="/book/<%= bookName %>/story"><i class="bi-sort-numeric-down"></i> Story Mode</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/book/<%= bookName %>/latest"><i class="bi-sort-numeric-down-alt text-warning"></i> Latest First</a>
          </li>
          <% } %>
        </ul>
     </div>
    </div>
  </div>








  <main class="container">

    <div class="row row-cols-1 row-cols-md-2 g-4">
      <% posts.forEach(function(post,index){ %>
        <div class="col">
         <div class="card bg-dark text-white shadow mb-5">
           <% if(post.image){ %><a href="/read/<%= post.bookName %>/<%= post.number %>"><img src="/image/lg-<%= post.image %>" class="card-img-top" alt="<%= post.title %>"></a><% } %>
           <div class="card-body">
             <a href="/read/<%= post.bookName %>/<%= post.number %>" class="text-decoration-none"><h5 class="card-title text-warning">#<%= post.number %>: <%= post.title %></h5></a>
             <p class="card-text small"><%= post.text %></p>
             <% if(post.audio){ %><a href="/audio/<%= post.audio %>" class="btn btn-warning">Listen</a><% } %>
            <a href="/read/<%= post.bookName %>/<%= post.number %>" class="btn btn-outline-warning">Read</a>
           </div>
           <div class="card-footer text-muted small">
             <%= post.timestamp %>
           </div>
         </div>
       </div>
      <% }); %>
    </div>


    <div class="row my-5">

      <div class="col">
        <nav aria-label="Page navigation example">

          <% if(currentSort == 'story'){ %>
            <ul class="pagination pagination-lg">
              <% if(!pagination.pageFirst){ %>
                <li class="page-item"><a class="page-link bg-dark text-white border-warning" href="/book/<%= bookName %>/<%= currentSort %>/page/<%= pagination.pageOlder %>">&laquo;&nbsp;Previous</a></li>
                <% } %>
              <% if(!pagination.pageLast){ %>
                <li class="page-item"><a class="page-link bg-dark text-white border-warning" href="/book/<%= bookName %>/<%= currentSort %>/page/<%= pagination.pageNewer %>">Next&nbsp;&raquo;</a></li>
              <% } %>


            </ul>
          <% }else{ %>
            <ul class="pagination pagination-lg">
              <% if(!pagination.pageLast){ %><li class="page-item"><a class="page-link bg-dark text-white border-warning" href="/book/<%= bookName %>/<%= currentSort %>/page/<%= pagination.pageOlder %>">&laquo;&nbsp;Older</a></li><% } %>
              <!-- <% if(!pagination.pageFirst){ %><li class="page-item"><a class="page-link bg-dark text-white border-warning" href="/ %>">Latest Posts</a></li><% } %> -->
              <% if(!pagination.pageFirst){ %><li class="page-item"><a class="page-link bg-dark text-white border-warning" href="/book/<%= bookName %>/<%= currentSort %>/page/<%= pagination.pageNewer %>">Newer&nbsp;&raquo;</a></li><% } %>
            </ul>

          <% } %>

        </nav>
      </div>


    </div>


  </main><!-- /.container -->

  <%- include('partials/footer.html', {}); %>
  <%- include('partials/foot.html', {}); %>
  </body>
</html>
